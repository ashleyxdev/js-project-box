/* =========================
   MASCOT SYSTEM - TUDU CHAN
========================= */

/* Header layout integration */
.header__content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: clamp(0.75rem, 2vw, 1.25rem);
  position: relative;
}

/* Mascot container */
.tudu-chan {
  width: clamp(70px, 15vw, 90px);
  height: clamp(70px, 15vw, 90px);
  flex-shrink: 0;
  filter: drop-shadow(0 2px 8px rgba(255, 159, 140, 0.15));
  will-change: transform;
}

/* =========================
   IDLE ANIMATIONS
========================= */

/* Gentle floating */
.tudu-chan--idle {
  animation: chanFloat 4s ease-in-out infinite;
}

@keyframes chanFloat {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-6px);
  }
}

/* Breathing head */
.tudu-chan--idle .chan__head {
  animation: chanBreathe 3s ease-in-out infinite;
  transform-origin: 110px 120px;
}

@keyframes chanBreathe {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.02);
  }
}

/* Blinking eyes */
.tudu-chan--idle .chan__eye {
  animation: chanBlink 4s ease-in-out infinite;
  transform-origin: center;
}

@keyframes chanBlink {
  0%, 48%, 52%, 100% {
    opacity: 1;
    transform: scaleY(1);
  }
  50% {
    opacity: 0;
    transform: scaleY(0.1);
  }
}

/* Ear wiggle */
.tudu-chan--idle .chan__ear--right {
  animation: chanEarWiggle 5s ease-in-out infinite;
  transform-origin: 175px 20px;
}

@keyframes chanEarWiggle {
  0%, 90%, 100% {
    transform: rotate(0deg);
  }
  92%, 96% {
    transform: rotate(-5deg);
  }
  94%, 98% {
    transform: rotate(5deg);
  }
}

/* Subtle blush pulse */
.tudu-chan--idle .chan__blush {
  animation: chanBlushPulse 3s ease-in-out infinite;
}

@keyframes chanBlushPulse {
  0%, 100% {
    opacity: 0.7;
  }
  50% {
    opacity: 0.5;
  }
}

/* Gentle nose twitch */
.tudu-chan--idle .chan__nose {
  animation: chanNoseTwitch 4s ease-in-out infinite;
  transform-origin: 110px 132px;
}

@keyframes chanNoseTwitch {
  0%, 94%, 100% {
    transform: scale(1);
  }
  96%, 98% {
    transform: scale(1.15);
  }
}

/* Whisker sway */
.tudu-chan--idle .chan__whiskers--left {
  animation: chanWhiskersLeft 3s ease-in-out infinite;
  transform-origin: 58px 130px;
}

.tudu-chan--idle .chan__whiskers--right {
  animation: chanWhiskersRight 3s ease-in-out infinite;
  transform-origin: 162px 130px;
}

@keyframes chanWhiskersLeft {
  0%, 100% {
    transform: rotate(0deg);
  }
  50% {
    transform: rotate(-2deg);
  }
}

@keyframes chanWhiskersRight {
  0%, 100% {
    transform: rotate(0deg);
  }
  50% {
    transform: rotate(2deg);
  }
}

/* =========================
   REACTION STATES
========================= */

/* Happy state - bounce with big smile */
.tudu-chan--happy {
  animation: chanHappyBounce 0.9s ease-out;
}

@keyframes chanHappyBounce {
  0% {
    transform: translateY(0) scale(1);
  }
  30% {
    transform: translateY(-12px) scale(1.05);
  }
  50% {
    transform: translateY(-8px) scale(1.03);
  }
  70% {
    transform: translateY(-4px) scale(1.01);
  }
  100% {
    transform: translateY(0) scale(1);
  }
}

.tudu-chan--happy .chan__mouth {
  d: path("M95 138 Q110 150 125 138");
  stroke-width: 2.5;
}

.tudu-chan--happy .chan__eye {
  transform: translateY(-3px);
}

.tudu-chan--happy .chan__blush {
  opacity: 0.9;
}

/* Celebrate state - joyful scale and rotate */
.tudu-chan--celebrate {
  animation: chanCelebrate 0.9s ease-out;
}

@keyframes chanCelebrate {
  0% {
    transform: scale(1) rotate(0deg);
  }
  25% {
    transform: scale(1.1) rotate(-5deg);
  }
  50% {
    transform: scale(1.15) rotate(5deg);
  }
  75% {
    transform: scale(1.1) rotate(-3deg);
  }
  100% {
    transform: scale(1) rotate(0deg);
  }
}

.tudu-chan--celebrate .chan__mouth {
  d: path("M95 138 Q110 150 125 138");
  stroke-width: 2.5;
}

.tudu-chan--celebrate .chan__blush {
  opacity: 1;
}

.tudu-chan--celebrate .chan__eye circle {
  r: 7;
}

/* Sleepy state - relaxed expression */
.tudu-chan--sleepy {
  animation: chanSleepy 0.9s ease-out;
}

@keyframes chanSleepy {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(4px);
  }
}

.tudu-chan--sleepy .chan__eye {
  transform: scaleY(0.2);
  opacity: 0.7;
}

.tudu-chan--sleepy .chan__mouth {
  d: path("M100 142 Q110 141 120 142");
  opacity: 0.6;
}

.tudu-chan--sleepy .chan__head {
  animation: chanSleepyHead 0.9s ease-out;
  transform-origin: 110px 120px;
}

@keyframes chanSleepyHead {
  0%, 100% {
    transform: rotate(0deg);
  }
  50% {
    transform: rotate(-4deg);
  }
}

.tudu-chan--sleepy .chan__blush {
  opacity: 0.4;
}

/* =========================
   DARK MODE ADJUSTMENTS
========================= */

body.dark .tudu-chan {
  filter: drop-shadow(0 2px 8px rgba(255, 159, 140, 0.25));
}

/* =========================
   RESPONSIVE SCALING
========================= */

@media (max-width: 480px) {
  .header__content {
    gap: 0.625rem;
  }
  
  .tudu-chan {
    width: clamp(60px, 12vw, 70px);
    height: clamp(60px, 12vw, 70px);
  }
  
  .app__title {
    font-size: clamp(1.25rem, 5vw, 1.5rem);
  }
}

@media (max-width: 360px) {
  .tudu-chan {
    width: 55px;
    height: 55px;
  }
}

/* =========================
   ACCESSIBILITY
========================= */

@media (prefers-reduced-motion: reduce) {
  .tudu-chan,
  .tudu-chan *,
  .tudu-chan--idle,
  .tudu-chan--idle *,
  .tudu-chan--happy,
  .tudu-chan--celebrate,
  .tudu-chan--sleepy {
    animation: none !important;
    transition: none !important;
  }
  
  /* Keep only state changes visible */
  .tudu-chan--happy .chan__mouth,
  .tudu-chan--celebrate .chan__mouth {
    d: path("M95 138 Q110 150 125 138");
  }
  
  .tudu-chan--sleepy .chan__eye {
    transform: scaleY(0.2);
  }
}